{% extends "base.html" %}

{% block content %}
<div class="sectiondetail">
	<div class="row">
		<h3>{{book.best_title}}</h3>
	</div>
	<div class="row">
		<div class="ten columns">
			<p>{{book.best_author}}</p>
		</div>
		<div class="two columns">
			<p>{{book.publish_year}}</p>
		</div>
	</div>
	<div class="row">
		<div class="bookcover">
			<img src="{{ imageSrc }}" alt="No bookcover">
		</div>
	</div>
	<div class="row">
		<div class="centerbutton">
			<button id="download-btn" onclick="sendDownload()">
				<span class="material-symbols-outlined">
					file_download
				</span>					
				Download to E-Reader
			</button>
		</div>
	</div>
</div>

<script type="text/javascript" charset="utf-8">
	const sendDownload = () => {
    showSnackbar('start downloading to {{ current_user.ereaderuid}}')
		socket.emit('get download url', {
			'record_id': '{{ book.record_id }}',
			'ereaderuid': '{{ current_user.ereaderuid }}'
		})
	}
</script>
{% endblock %}